{"ast":null,"code":"var _jsxFileName = \"D:\\\\tcs\\\\frontend\\\\src\\\\pages\\\\AttendanceCheck.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport axiosInstance from '../api/axiosConfig';\nimport CameraCapture from '../components/CameraCapture';\nimport Clock from '../components/Clock';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttendanceCheck = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [lastAttendance, setLastAttendance] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n  const logoUrl = 'https://upload.wikimedia.org/wikipedia/commons/7/72/Checkbox_icon.svg';\n  useEffect(() => {\n    fetchLastAttendance();\n  }, []);\n  const fetchLastAttendance = async () => {\n    try {\n      const res = await axiosInstance.get('/attendance/myattendances');\n      setLastAttendance(res.data[0] || null);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const handleCheckIn = async photo => {\n    setLoading(true);\n    setMessage('');\n    try {\n      const res = await axiosInstance.post('/attendance/checkin', {\n        photo\n      });\n      setMessage('Check-in recorded successfully');\n      setLastAttendance(res.data.attendance);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Check-in failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCheckOut = async photo => {\n    if (!(lastAttendance !== null && lastAttendance !== void 0 && lastAttendance._id)) {\n      setMessage('Please check-in first');\n      return;\n    }\n    if (lastAttendance.checkOutTime) {\n      setMessage('Already checked out');\n      return;\n    }\n    setLoading(true);\n    setMessage('');\n    try {\n      const res = await axiosInstance.post(`/attendance/checkout/${lastAttendance._id}`, {\n        photo\n      });\n      setMessage('Check-out recorded successfully');\n      setLastAttendance(res.data.attendance);\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setMessage(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Check-out failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 600,\n      margin: '40px auto',\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logoUrl,\n      alt: \"Logo\",\n      style: {\n        width: 80\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Employee Check-in/Check-out System\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Clock, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CameraCapture, {\n      onCapture: imgData => {\n        if (!lastAttendance || lastAttendance.checkOutTime) {\n          handleCheckIn(imgData);\n        } else {\n          handleCheckOut(imgData);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Processing...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }, this), lastAttendance && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 20,\n        textAlign: 'left',\n        border: '1px solid #ccc',\n        padding: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Last Attendance Record\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Check-in Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 14\n        }, this), \" \", new Date(lastAttendance.checkInTime).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: lastAttendance.checkInPhoto,\n        alt: \"Check In\",\n        style: {\n          width: 100,\n          borderRadius: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Check-out Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 14\n        }, this), \" \", lastAttendance.checkOutTime ? new Date(lastAttendance.checkOutTime).toLocaleString() : 'Not checked out yet']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), lastAttendance.checkOutPhoto && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: lastAttendance.checkOutPhoto,\n        alt: \"Check Out\",\n        style: {\n          width: 100,\n          borderRadius: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 44\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(AttendanceCheck, \"Ev8fRQBTfepCCetqD1Jaik0Kc5c=\");\n_c = AttendanceCheck;\nexport default AttendanceCheck;\nvar _c;\n$RefreshReg$(_c, \"AttendanceCheck\");","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","axiosInstance","CameraCapture","Clock","jsxDEV","_jsxDEV","AttendanceCheck","_s","user","lastAttendance","setLastAttendance","loading","setLoading","message","setMessage","logoUrl","fetchLastAttendance","res","get","data","error","console","handleCheckIn","photo","post","attendance","_error$response","_error$response$data","response","handleCheckOut","_id","checkOutTime","_error$response2","_error$response2$data","style","maxWidth","margin","textAlign","children","src","alt","width","fileName","_jsxFileName","lineNumber","columnNumber","onCapture","imgData","marginTop","border","padding","Date","checkInTime","toLocaleString","checkInPhoto","borderRadius","checkOutPhoto","_c","$RefreshReg$"],"sources":["D:/tcs/frontend/src/pages/AttendanceCheck.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport axiosInstance from '../api/axiosConfig';\r\nimport CameraCapture from '../components/CameraCapture';\r\nimport Clock from '../components/Clock';\r\n\r\nconst AttendanceCheck = () => {\r\n  const { user } = useContext(AuthContext);\r\n  const [lastAttendance, setLastAttendance] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const logoUrl = 'https://upload.wikimedia.org/wikipedia/commons/7/72/Checkbox_icon.svg';\r\n\r\n  useEffect(() => {\r\n    fetchLastAttendance();\r\n  }, []);\r\n\r\n  const fetchLastAttendance = async () => {\r\n    try {\r\n      const res = await axiosInstance.get('/attendance/myattendances');\r\n      setLastAttendance(res.data[0] || null);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const handleCheckIn = async (photo) => {\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const res = await axiosInstance.post('/attendance/checkin', { photo });\r\n      setMessage('Check-in recorded successfully');\r\n      setLastAttendance(res.data.attendance);\r\n    } catch (error) {\r\n      setMessage(error.response?.data?.message || 'Check-in failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCheckOut = async (photo) => {\r\n    if (!lastAttendance?._id) {\r\n      setMessage('Please check-in first');\r\n      return;\r\n    }\r\n    if (lastAttendance.checkOutTime) {\r\n      setMessage('Already checked out');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      const res = await axiosInstance.post(`/attendance/checkout/${lastAttendance._id}`, { photo });\r\n      setMessage('Check-out recorded successfully');\r\n      setLastAttendance(res.data.attendance);\r\n    } catch (error) {\r\n      setMessage(error.response?.data?.message || 'Check-out failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 600, margin: '40px auto', textAlign: 'center' }}>\r\n      <img src={logoUrl} alt=\"Logo\" style={{ width: 80 }} />\r\n      <h1>Employee Check-in/Check-out System</h1>\r\n      <Clock />\r\n      <CameraCapture\r\n        onCapture={(imgData) => {\r\n          if (!lastAttendance || lastAttendance.checkOutTime) {\r\n            handleCheckIn(imgData);\r\n          } else {\r\n            handleCheckOut(imgData);\r\n          }\r\n        }}\r\n      />\r\n      {loading && <p>Processing...</p>}\r\n      {message && <p>{message}</p>}\r\n      {lastAttendance && (\r\n        <div style={{ marginTop: 20, textAlign: 'left', border: '1px solid #ccc', padding: 10 }}>\r\n          <h3>Last Attendance Record</h3>\r\n          <p><strong>Check-in Time:</strong> {new Date(lastAttendance.checkInTime).toLocaleString()}</p>\r\n          <img src={lastAttendance.checkInPhoto} alt=\"Check In\" style={{ width: 100, borderRadius: 10 }} />\r\n          <p><strong>Check-out Time:</strong> {lastAttendance.checkOutTime ? new Date(lastAttendance.checkOutTime).toLocaleString() : 'Not checked out yet'}</p>\r\n          {lastAttendance.checkOutPhoto && <img src={lastAttendance.checkOutPhoto} alt=\"Check Out\" style={{ width: 100, borderRadius: 10 }} />}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceCheck;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}