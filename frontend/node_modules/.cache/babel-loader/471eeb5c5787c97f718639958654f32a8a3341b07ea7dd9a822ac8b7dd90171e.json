{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const CameraCapture=_ref=>{let{onCapture}=_ref;const videoRef=useRef(null);const canvasRef=useRef(null);const[enabled,setEnabled]=useState(false);useEffect(()=>{if(!enabled)return;const startCamera=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:true});videoRef.current.srcObject=stream;videoRef.current.play();}catch(error){alert('Error accessing camera: '+error.message);}};startCamera();return()=>{if(videoRef.current&&videoRef.current.srcObject){videoRef.current.srcObject.getTracks().forEach(track=>track.stop());}};},[enabled]);const handleCapture=()=>{if(!videoRef.current)return;const width=videoRef.current.videoWidth;const height=videoRef.current.videoHeight;canvasRef.current.width=width;canvasRef.current.height=height;const ctx=canvasRef.current.getContext('2d');ctx.drawImage(videoRef.current,0,0,width,height);const imageData=canvasRef.current.toDataURL('image/png');onCapture(imageData);};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[!enabled&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEnabled(true),children:\"Start Camera\"}),enabled&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,style:{width:300,borderRadius:10}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCapture,style:{marginTop:10},children:\"Capture Photo\"}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{display:'none'}})]})]});};export default CameraCapture;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CameraCapture","_ref","onCapture","videoRef","canvasRef","enabled","setEnabled","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","play","error","alert","message","getTracks","forEach","track","stop","handleCapture","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","imageData","toDataURL","style","textAlign","children","onClick","ref","borderRadius","marginTop","display"],"sources":["D:/tcs/frontend/src/components/CameraCapture.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nconst CameraCapture = ({ onCapture }) => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [enabled, setEnabled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    const startCamera = async () => {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.play();\r\n      } catch (error) {\r\n        alert('Error accessing camera: ' + error.message);\r\n      }\r\n    };\r\n\r\n    startCamera();\r\n\r\n    return () => {\r\n      if (videoRef.current && videoRef.current.srcObject) {\r\n        videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n      }\r\n    };\r\n  }, [enabled]);\r\n\r\n  const handleCapture = () => {\r\n    if (!videoRef.current) return;\r\n\r\n    const width = videoRef.current.videoWidth;\r\n    const height = videoRef.current.videoHeight;\r\n\r\n    canvasRef.current.width = width;\r\n    canvasRef.current.height = height;\r\n\r\n    const ctx = canvasRef.current.getContext('2d');\r\n    ctx.drawImage(videoRef.current, 0, 0, width, height);\r\n\r\n    const imageData = canvasRef.current.toDataURL('image/png');\r\n\r\n    onCapture(imageData);\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      {!enabled && (\r\n        <button onClick={() => setEnabled(true)}>Start Camera</button>\r\n      )}\r\n      {enabled && (\r\n        <>\r\n          <video ref={videoRef} style={{ width: 300, borderRadius: 10 }}></video>\r\n          <br />\r\n          <button onClick={handleCapture} style={{ marginTop: 10 }}>Capture Photo</button>\r\n          <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CameraCapture;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}