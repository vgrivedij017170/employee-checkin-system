{"ast":null,"code":"import React,{useState,useContext}from'react';import axiosInstance from'../api/axiosConfig';import{AuthContext}from'../context/AuthContext';import{useNavigate,Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const{login}=useContext(AuthContext);const navigate=useNavigate();const[formData,setFormData]=useState({name:'',dob:'',mobile:'',email:'',password:'',photo:''});const[error,setError]=useState('');const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handlePhotoChange=e=>{const file=e.target.files[0];if(!file)return;if(file.size>1024*1024){alert('Photo size must be less than 1MB');return;}const reader=new FileReader();reader.onloadend=()=>{setFormData({...formData,photo:reader.result});};reader.readAsDataURL(file);};const handleSubmit=async e=>{e.preventDefault();setError('');try{const res=await axiosInstance.post('/auth/register',formData);login(res.data.token);navigate('/attendance');}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Registration failed');}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:500,margin:'40px auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Register as Employee\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",name:\"name\",value:formData.name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date of Birth:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"date\",name:\"dob\",value:formData.dob,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Mobile Number:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"text\",name:\"mobile\",value:formData.mobile,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"email\",name:\"email\",value:formData.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"password\",name:\"password\",value:formData.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Profile Photo (optional):\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handlePhotoChange}),formData.photo&&/*#__PURE__*/_jsx(\"img\",{src:formData.photo,alt:\"Profile\",style:{width:100,marginTop:10,borderRadius:'50%'}})]}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:15},type:\"submit\",children:\"Register\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:10},children:[\"Already registered? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login here\"})]})]});};export default Register;","map":{"version":3,"names":["React","useState","useContext","axiosInstance","AuthContext","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Register","login","navigate","formData","setFormData","name","dob","mobile","email","password","photo","error","setError","handleChange","e","target","value","handlePhotoChange","file","files","size","alert","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","res","post","data","token","_error$response","_error$response$data","response","message","style","maxWidth","margin","children","color","onSubmit","required","type","onChange","accept","src","alt","width","marginTop","borderRadius","to"],"sources":["D:/tcs/frontend/src/pages/Register.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport axiosInstance from '../api/axiosConfig';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\nconst Register = () => {\r\n  const { login } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    dob: '',\r\n    mobile: '',\r\n    email: '',\r\n    password: '',\r\n    photo: '',\r\n  });\r\n  const [error, setError] = useState('');\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handlePhotoChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    if (file.size > 1024 * 1024) {\r\n      alert('Photo size must be less than 1MB');\r\n      return;\r\n    }\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setFormData({ ...formData, photo: reader.result });\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n      const res = await axiosInstance.post('/auth/register', formData);\r\n      login(res.data.token);\r\n      navigate('/attendance');\r\n    } catch (error) {\r\n      setError(error.response?.data?.message || 'Registration failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 500, margin: '40px auto' }}>\r\n      <h2>Register as Employee</h2>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label>Full Name:</label><br />\r\n          <input required type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <label>Date of Birth:</label><br />\r\n          <input required type=\"date\" name=\"dob\" value={formData.dob} onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <label>Mobile Number:</label><br />\r\n          <input required type=\"text\" name=\"mobile\" value={formData.mobile} onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <label>Email:</label><br />\r\n          <input required type=\"email\" name=\"email\" value={formData.email} onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <label>Password:</label><br />\r\n          <input required type=\"password\" name=\"password\" value={formData.password} onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <label>Profile Photo (optional):</label><br />\r\n          <input type=\"file\" accept=\"image/*\" onChange={handlePhotoChange} />\r\n          {formData.photo && <img src={formData.photo} alt=\"Profile\" style={{ width: 100, marginTop: 10, borderRadius: '50%' }} />}\r\n        </div>\r\n        <button style={{ marginTop: 15 }} type=\"submit\">Register</button>\r\n      </form>\r\n      <p style={{ marginTop: 10 }}>\r\n        Already registered? <Link to=\"/login\">Login here</Link>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}